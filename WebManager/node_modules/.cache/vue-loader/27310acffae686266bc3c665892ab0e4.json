{"remainingRequest":"I:\\Project\\CampusPost-GraduationProject\\WebManager\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!I:\\Project\\CampusPost-GraduationProject\\WebManager\\src\\components\\manage\\ClassDistribution.vue?vue&type=script&lang=js&","dependencies":[{"path":"I:\\Project\\CampusPost-GraduationProject\\WebManager\\src\\components\\manage\\ClassDistribution.vue","mtime":1627198309543},{"path":"I:\\Project\\CampusPost-GraduationProject\\WebManager\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"I:\\Project\\CampusPost-GraduationProject\\WebManager\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"I:\\Project\\CampusPost-GraduationProject\\WebManager\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"I:\\Project\\CampusPost-GraduationProject\\WebManager\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICdDbGFzc0Rpc3RyaWJ1dGlvbicsDQogIGRhdGEgKCkgew0KICAgIHJldHVybiB7DQogICAgICBzdGVwX2FjdGl2ZTogMCwNCiAgICAgIGNvbGxlZ2VJbmZvRm9ybTogew0KICAgICAgICBjbGFzc19pZDogbnVsbA0KICAgICAgfSwNCiAgICAgIGNvbGxlZ2VJbmZvRm9ybVJ1bGVzOiB7fSwNCiAgICAgIHNlbGVjdENvbGxlZ2VfaWQ6IG51bGwsDQogICAgICBEaWFsb2dTZWxlY3RDb2xsZWdlX2lkOiBudWxsLA0KICAgICAgY29sbGVnZUxpc3Q6IFt7DQogICAgICAgIHZhbHVlOiAxLA0KICAgICAgICBsYWJlbDogJ+eUteWtkOS4juS/oeaBr+WtpumZoicNCiAgICAgIH0sIHsNCiAgICAgICAgdmFsdWU6IDIsDQogICAgICAgIGxhYmVsOiAn57uP5rWO5LiO6LS45piT5a2m6ZmiJw0KICAgICAgfSwgew0KICAgICAgICB2YWx1ZTogMywNCiAgICAgICAgbGFiZWw6ICfkuJbljZroibrmnK/kuI7kvKDlqpLlrabpmaInDQogICAgICB9LCB7DQogICAgICAgIHZhbHVlOiA0LA0KICAgICAgICBsYWJlbDogJ+W7uuetkeW3peeoi+S4jueuoeeQhuWtpumZoicNCiAgICAgIH0sIHsNCiAgICAgICAgdmFsdWU6IDUsDQogICAgICAgIGxhYmVsOiAn55S15ZWG5LiO54mp5rWB5a2m6ZmiJw0KICAgICAgfSwgew0KICAgICAgICB2YWx1ZTogNiwNCiAgICAgICAgbGFiZWw6ICfkvJrorqHkuI7ph5Hono3lrabpmaInDQogICAgICB9XSwNCiAgICAgIGNsYXNzTGlzdDogW10sDQogICAgICBkaWFsb2dDbGFzc0xpc3Q6IFtdLA0KICAgICAgLy8gdGFn5qCH562+5a+557q/77yM5YKo5a2Y5aeT5ZCN5ZKMSWQNCiAgICAgIHN0dWRlbnRzVGFnczogW10sDQogICAgICAvLyB0YWfkuK3nmoTlrabnlJ9JZO+8jOWNleeLrOWCqOWtmOS4uuS4gOS4qmxpc3QNCiAgICAgIHN0dWRlbnRUYWdzSWRzOiBbMCwgMV0sDQogICAgICAvLyDmlrDlop7nmoTlrabnlJ9JZA0KICAgICAgYWRkU3R1ZGVudElkczogW10sDQogICAgICAvLyDku47nj63nuqfkuK3np7vpmaTnmoTlrabnlJ9JZA0KICAgICAgZHJvcFN0dWRlbnRzOiBbXSwNCiAgICAgIC8vIOa3u+WKoOWtpueUn+eahERpYWxvZ+aYvuekuuS4juWQpg0KICAgICAgYWRkU3R1RGlhbG9nVmlzaWJsZTogZmFsc2UsDQogICAgICAvLyBEaWFsb2fooajljZXkuK3nmoTkv6Hmga8NCiAgICAgIENsYXNzSW5mb0Zvcm06IHsNCiAgICAgICAgY29sbGVnZV9pZDogbnVsbCwNCiAgICAgICAgY2xhc3NfaWQ6IG51bGwNCiAgICAgIH0sDQogICAgICBkaWFsb2dTdHVkZW50c0xpc3Q6IFtdLA0KICAgICAgc3R1ZGVudEluZm9Gb3JtOiB7DQogICAgICAgIHNlbGVjdGVkX3N0dWRlbnQ6IG51bGwNCiAgICAgIH0NCiAgICB9DQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICBwcmV2ICgpIHsNCiAgICAgIC0tdGhpcy5zdGVwX2FjdGl2ZQ0KICAgIH0sDQogICAgbmV4dCAoKSB7DQogICAgICBpZiAoKyt0aGlzLnN0ZXBfYWN0aXZlID4gMykgew0KICAgICAgICB0aGlzLnN0ZXBfYWN0aXZlID0gMA0KICAgICAgICB0aGlzLm5leHRCdG4gPSAn5LiL5LiA5q2lJw0KICAgICAgfQ0KICAgICAgaWYgKHRoaXMuc3RlcF9hY3RpdmUgPT09IDEpIHsNCiAgICAgICAgdGhpcy5zdHVkZW50c1RhZ3MgPSBbXQ0KICAgICAgICB0aGlzLnN0dWRlbnRUYWdzSWRzID0gWzAsIDFdDQogICAgICAgIC8vIOiOt+WPluaVmeWupOW3suacieeahOWtpueUnw0KICAgICAgICB0aGlzLmdldENsYXNzU3R1ZGVudHMoKQ0KICAgICAgfQ0KICAgIH0sDQogICAgYXN5bmMgb25Db2xsZWdlU2VsZWN0ICgpIHsNCiAgICAgIHRoaXMuY29sbGVnZUluZm9Gb3JtLmNsYXNzX2lkID0gbnVsbA0KICAgICAgY29uc3QgeyBkYXRhOiByZXMgfSA9IGF3YWl0IHRoaXMuJGh0dHAuZ2V0KCcvY29sbGVnZUNsYXNzL2dldENvbGxlZ2VDbGFzcycsIHsgcGFyYW1zOiB7IGNvbGxlZ2VfaWQ6IHRoaXMuc2VsZWN0Q29sbGVnZV9pZCB9IH0pDQogICAgICBjb25zb2xlLmxvZyhyZXMpDQogICAgICB0aGlzLmNsYXNzTGlzdCA9IHJlcy5kYXRhDQogICAgfSwNCiAgICBhc3luYyBnZXRDbGFzc1N0dWRlbnRzICgpIHsNCiAgICAgIGNvbnN0IHsgZGF0YTogcmVzIH0gPSBhd2FpdCB0aGlzLiRodHRwLmdldCgnL3N0dWRlbnQvZ2V0Q2xhc3NTdHVkZW50TGlzdCcsIHsgcGFyYW1zOiB7IGNsYXNzX2lkOiB0aGlzLmNvbGxlZ2VJbmZvRm9ybS5jbGFzc19pZCB9IH0pDQogICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHJlcy5kYXRhLmxlbmd0aDsgaisrKSB7DQogICAgICAgIHRoaXMuc3R1ZGVudHNUYWdzLnB1c2goew0KICAgICAgICAgIGFjY291bnRfaWQ6IHJlcy5kYXRhW2pdLmFjY291bnRfaWQsDQogICAgICAgICAgbmFtZTogcmVzLmRhdGFbal0udHVyZW5hbWUNCiAgICAgICAgfSkNCiAgICAgICAgdGhpcy5zdHVkZW50VGFnc0lkcy5wdXNoKHJlcy5kYXRhW2pdLmFjY291bnRfaWQpDQogICAgICB9DQogICAgfSwNCiAgICBkaWFsb2dDbG9zZSAoKSB7DQogICAgICB0aGlzLkRpYWxvZ1NlbGVjdENvbGxlZ2VfaWQgPSBudWxsDQogICAgICB0aGlzLnN0dWRlbnRJbmZvRm9ybS5zZWxlY3RlZF9zdHVkZW50ID0gbnVsbA0KICAgIH0sDQogICAgLy8gYXN5bmMgZ2V0Q29sbGVnZUNsYXNzTGlzdCAoKSB7DQogICAgLy8gICBjb25zdCB7IGRhdGE6IHJlcyB9ID0gYXdhaXQgdGhpcy4kaHR0cC5nZXQoJy9jb2xsZWdlQ2xhc3MvZ2V0Q29sbGVnZUNsYXNzJywgeyBwYXJhbXM6IHsgY29sbGVnZV9pZDogdGhpcy5EaWFsb2dTZWxlY3RDb2xsZWdlX2lkIH0gfSkNCiAgICAvLyAgIHRoaXMuZGlhbG9nQ2xhc3NMaXN0ID0gcmVzLmRhdGENCiAgICAvLyB9LA0KICAgIGFzeW5jIG9uQ29sbGVnZVNlbGVjdENoYW5nZSAoKSB7DQogICAgICB0aGlzLnN0dWRlbnRJbmZvRm9ybS5zZWxlY3RlZF9zdHVkZW50ID0gbnVsbA0KICAgICAgY29uc3QgeyBkYXRhOiByZXMgfSA9IGF3YWl0IHRoaXMuJGh0dHAucG9zdCgnL3N0dWRlbnQvZ2V0Q29sbGVnZVN0dWRlbnRMaXN0Tm90SW4nLCB7DQogICAgICAgIGNvbGxlZ2VfaWQ6IHRoaXMuRGlhbG9nU2VsZWN0Q29sbGVnZV9pZCwNCiAgICAgICAgaWRzOiB0aGlzLnN0dWRlbnRUYWdzSWRzDQogICAgICB9KQ0KICAgICAgY29uc29sZS5sb2cocmVzKQ0KICAgICAgaWYgKHJlcy5jb2RlICE9PSAyMDApIHRoaXMuJG1lc3NhZ2UuZXJyb3IocmVzLm1zZykNCiAgICAgIHRoaXMuZGlhbG9nU3R1ZGVudHNMaXN0ID0gcmVzLmRhdGENCiAgICB9LA0KICAgIGFzeW5jIGFkZFN0dUNvbmZpcm0gKCkgew0KICAgICAgaWYgKHRoaXMuZHJvcFN0dWRlbnRzLmluZGV4T2YodGhpcy5zdHVkZW50SW5mb0Zvcm0uc2VsZWN0ZWRfc3R1ZGVudCkgPT09IC0xKSB7DQogICAgICAgIHRoaXMuYWRkU3R1ZGVudElkcy5wdXNoKHRoaXMuc3R1ZGVudEluZm9Gb3JtLnNlbGVjdGVkX3N0dWRlbnQpDQogICAgICB9IGVsc2Ugew0KICAgICAgICB0aGlzLmRyb3BTdHVkZW50cy5zcGxpY2UodGhpcy5kcm9wU3R1ZGVudHMuaW5kZXhPZih0aGlzLnN0dWRlbnRJbmZvRm9ybS5zZWxlY3RlZF9zdHVkZW50KSwgMSkNCiAgICAgIH0NCiAgICAgIGNvbnN0IHsgZGF0YTogcmVzIH0gPSBhd2FpdCB0aGlzLiRodHRwLmdldCgnL3N0dWRlbnQvZ2V0U3R1ZGVudEJ5QWNjb3VudElkJywgeyBwYXJhbXM6IHsgYWNjb3VudF9pZDogdGhpcy5zdHVkZW50SW5mb0Zvcm0uc2VsZWN0ZWRfc3R1ZGVudCB9IH0pDQogICAgICB0aGlzLnN0dWRlbnRzVGFncy5wdXNoKHsNCiAgICAgICAgYWNjb3VudF9pZDogdGhpcy5zdHVkZW50SW5mb0Zvcm0uc2VsZWN0ZWRfc3R1ZGVudCwNCiAgICAgICAgbmFtZTogcmVzLmRhdGEudHVyZW5hbWUNCiAgICAgIH0pDQogICAgICB0aGlzLnN0dWRlbnRUYWdzSWRzLnB1c2godGhpcy5zdHVkZW50SW5mb0Zvcm0uc2VsZWN0ZWRfc3R1ZGVudCkNCiAgICAgIHRoaXMuYWRkU3R1RGlhbG9nVmlzaWJsZSA9IGZhbHNlDQogICAgICBjb25zb2xlLmxvZygn5paw5aKe55qE5a2m55SfJykNCiAgICAgIGNvbnNvbGUubG9nKHRoaXMuYWRkU3R1ZGVudElkcykNCiAgICAgIGNvbnNvbGUubG9nKCfliKDpmaTnmoTlrabnlJ8nKQ0KICAgICAgY29uc29sZS5sb2codGhpcy5kcm9wU3R1ZGVudHMpDQogICAgICBjb25zb2xlLmxvZygn5bey57uP6YCJ5Lit55qE5a2m55SfJykNCiAgICAgIGNvbnNvbGUubG9nKHRoaXMuc3R1ZGVudFRhZ3NJZHMpDQogICAgfSwNCiAgICBoYW5kbGVDbG9zZSAodGFnKSB7DQogICAgICBpZiAodGhpcy5hZGRTdHVkZW50SWRzLmluZGV4T2YodGFnLmFjY291bnRfaWQpID09PSAtMSkgew0KICAgICAgICB0aGlzLmRyb3BTdHVkZW50cy5wdXNoKHRhZy5hY2NvdW50X2lkKQ0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgdGhpcy5hZGRTdHVkZW50SWRzLnNwbGljZSh0aGlzLmFkZFN0dWRlbnRJZHMuaW5kZXhPZih0YWcuYWNjb3VudF9pZCksIDEpDQogICAgICB9DQogICAgICB0aGlzLnN0dWRlbnRzVGFncy5zcGxpY2UodGhpcy5zdHVkZW50c1RhZ3MuaW5kZXhPZih0YWcpLCAxKQ0KICAgICAgdGhpcy5zdHVkZW50VGFnc0lkcy5zcGxpY2UodGhpcy5zdHVkZW50VGFnc0lkcy5pbmRleE9mKHRhZy5hY2NvdW50X2lkKSwgMSkNCiAgICAgIGNvbnNvbGUubG9nKCfmlrDlop7nmoTlrabnlJ8nKQ0KICAgICAgY29uc29sZS5sb2codGhpcy5hZGRTdHVkZW50SWRzKQ0KICAgICAgY29uc29sZS5sb2coJ+WIoOmZpOeahOWtpueUnycpDQogICAgICBjb25zb2xlLmxvZyh0aGlzLmRyb3BTdHVkZW50cykNCiAgICAgIGNvbnNvbGUubG9nKCflt7Lnu4/pgInkuK3nmoTlrabnlJ8nKQ0KICAgICAgY29uc29sZS5sb2codGhpcy5zdHVkZW50VGFnc0lkcykNCiAgICB9LA0KICAgIGFzeW5jIHN1Ym1pdCAoKSB7DQogICAgICBjb25zdCB7IGRhdGE6IHJlcyB9ID0gYXdhaXQgdGhpcy4kaHR0cC5wb3N0KCcvc3R1ZGVudC9jaGFuZ2VDbGFzcycsIHsNCiAgICAgICAgY2xhc3NfaWQ6IHRoaXMuY29sbGVnZUluZm9Gb3JtLmNsYXNzX2lkLA0KICAgICAgICBkcm9wSWRzOiB0aGlzLmRyb3BTdHVkZW50cywNCiAgICAgICAgYWRkSWRzOiB0aGlzLmFkZFN0dWRlbnRJZHMNCiAgICAgIH0pDQogICAgICBpZiAocmVzLmNvZGUgIT09IDIwMCkgcmV0dXJuIHRoaXMuJG1lc3NhZ2UuZXJyb3IocmVzLm1zZykNCiAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2VzcyhyZXMubXNnKQ0KICAgICAgdGhpcy5zdGVwX2FjdGl2ZSA9IDANCiAgICAgIHRoaXMuY29sbGVnZUluZm9Gb3JtLmNsYXNzX2lkID0gbnVsbA0KICAgICAgdGhpcy5zdHVkZW50VGFnc0lkcyA9IFswLCAxXQ0KICAgICAgdGhpcy5hZGRTdHVkZW50SWRzID0gW10NCiAgICAgIHRoaXMuZHJvcFN0dWRlbnRzID0gW10NCiAgICAgIHRoaXMuZGlhbG9nU3R1ZGVudHNMaXN0ID0gW10NCiAgICB9DQogIH0NCn0NCg=="},{"version":3,"sources":["ClassDistribution.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ClassDistribution.vue","sourceRoot":"src/components/manage","sourcesContent":["<template>\r\n  <div>\r\n    <el-breadcrumb separator-class=\"el-icon-arrow-right\">\r\n      <el-breadcrumb-item>首页</el-breadcrumb-item>\r\n      <el-breadcrumb-item>班级管理</el-breadcrumb-item>\r\n      <el-breadcrumb-item>班级分配</el-breadcrumb-item>\r\n    </el-breadcrumb>\r\n\r\n    <el-card>\r\n      <el-steps :active=\"step_active\" finish-status=\"success\">\r\n        <el-step title=\"选择班级\"></el-step>\r\n        <el-step title=\"添加学生\"></el-step>\r\n        <el-step title=\"确认添加\"></el-step>\r\n      </el-steps>\r\n      <div class=\"stepForm\" v-show=\"step_active === 0\">\r\n        <el-form :model=\"collegeInfoForm\" :rules=\"collegeInfoFormRules\" ref=\"dormitoryInfoFormRef\">\r\n          <el-form-item label-width=\"350\">\r\n            请选择学院：\r\n            <el-select v-model=\"selectCollege_id\" placeholder=\"请选择学院\" @change=\"onCollegeSelect\">\r\n              <el-option\r\n                v-for=\"item in collegeList\"\r\n                :key=\"item.value\"\r\n                :label=\"item.label\"\r\n                :value=\"item.value\">\r\n              </el-option>\r\n            </el-select>\r\n          </el-form-item>\r\n          <el-form-item label-width=\"350\">\r\n            请选择班级：\r\n            <el-select v-model=\"collegeInfoForm.class_id\" placeholder=\"请选择班级\">\r\n              <el-option\r\n                v-for=\"item in classList\"\r\n                :key=\"item.class_id\"\r\n                :label=\"item.class_name\"\r\n                :value=\"item.class_id\">\r\n              </el-option>\r\n            </el-select>\r\n          </el-form-item>\r\n        </el-form>\r\n      </div>\r\n      <div class=\"stepForm\" v-show=\"step_active === 1\">\r\n        <div class=\"tags\">\r\n          <el-tag\r\n            class=\"tags\"\r\n            :key=\"tag.key\"\r\n            v-for=\"tag in studentsTags\"\r\n            closable\r\n            :disable-transitions=\"false\"\r\n            @close=\"handleClose(tag)\">\r\n            {{ tag.name }}\r\n          </el-tag>\r\n          <el-button class=\"button-new-tag\" size=\"small\" v-show=\"studentsTags.length < 8\"\r\n                     @click=\"addStuDialogVisible = true\">+ New Tag\r\n          </el-button>\r\n        </div>\r\n      </div>\r\n      <div class=\"stepForm3\" v-show=\"step_active === 2\">\r\n        <h4>确定要修改班级为以下学生吗？</h4>\r\n        <span v-for=\"item in studentsTags\" :key=\"item.account_id\">&nbsp;&nbsp;{{ item.name }}&nbsp;&nbsp;</span>\r\n      </div>\r\n      <div class=\"stepForm3\" v-show=\"step_active === 3\">\r\n        <h4>最后的确认</h4>\r\n      </div>\r\n      <div class=\"stepForm\">\r\n        <el-button @click=\"prev\"\r\n                   v-if=\"step_active >= 1 && step_active <= 3\">\r\n          上一步\r\n        </el-button>\r\n        <el-button @click=\"next\" type=\"primary\" v-if=\"\r\n        ((step_active === 0) && (collegeInfoForm.class_id !== null)) || (step_active === 1) || step_active === 2\">\r\n          下一步\r\n        </el-button>\r\n        <el-button type=\"primary\" @click=\"submit\" v-if=\"step_active === 3\">提交</el-button>\r\n      </div>\r\n    </el-card>\r\n    <el-dialog\r\n      title=\"添加学生信息\"\r\n      :visible.sync=\"addStuDialogVisible\"\r\n      width=\"30%\"\r\n      @close=\"dialogClose\">\r\n      <el-form :model=\"ClassInfoForm\" ref=\"dormitoryInfoFormRef\">\r\n        <el-form-item label-width=\"350\">\r\n          请选择学院：\r\n          <el-select v-model=\"DialogSelectCollege_id\" placeholder=\"请选择学院\" @change=\"onCollegeSelectChange\">\r\n            <el-option\r\n              v-for=\"item in collegeList\"\r\n              :key=\"item.value\"\r\n              :label=\"item.label\"\r\n              :value=\"item.value\">\r\n            </el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item label-width=\"350\">\r\n          请选择学生：\r\n          <el-select v-model=\"studentInfoForm.selected_student\" placeholder=\"请选择学生\">\r\n            <el-option\r\n              v-for=\"item in dialogStudentsList\"\r\n              :key=\"item.account_id\"\r\n              :label=\"item.turename\"\r\n              :value=\"item.account_id\">\r\n            </el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n      </el-form>\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"addStuDialogVisible = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"addStuConfirm\"\r\n                   :disabled=\"studentInfoForm.selected_student === null\">确 定</el-button>\r\n      </span>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'ClassDistribution',\r\n  data () {\r\n    return {\r\n      step_active: 0,\r\n      collegeInfoForm: {\r\n        class_id: null\r\n      },\r\n      collegeInfoFormRules: {},\r\n      selectCollege_id: null,\r\n      DialogSelectCollege_id: null,\r\n      collegeList: [{\r\n        value: 1,\r\n        label: '电子与信息学院'\r\n      }, {\r\n        value: 2,\r\n        label: '经济与贸易学院'\r\n      }, {\r\n        value: 3,\r\n        label: '世博艺术与传媒学院'\r\n      }, {\r\n        value: 4,\r\n        label: '建筑工程与管理学院'\r\n      }, {\r\n        value: 5,\r\n        label: '电商与物流学院'\r\n      }, {\r\n        value: 6,\r\n        label: '会计与金融学院'\r\n      }],\r\n      classList: [],\r\n      dialogClassList: [],\r\n      // tag标签对线，储存姓名和Id\r\n      studentsTags: [],\r\n      // tag中的学生Id，单独储存为一个list\r\n      studentTagsIds: [0, 1],\r\n      // 新增的学生Id\r\n      addStudentIds: [],\r\n      // 从班级中移除的学生Id\r\n      dropStudents: [],\r\n      // 添加学生的Dialog显示与否\r\n      addStuDialogVisible: false,\r\n      // Dialog表单中的信息\r\n      ClassInfoForm: {\r\n        college_id: null,\r\n        class_id: null\r\n      },\r\n      dialogStudentsList: [],\r\n      studentInfoForm: {\r\n        selected_student: null\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    prev () {\r\n      --this.step_active\r\n    },\r\n    next () {\r\n      if (++this.step_active > 3) {\r\n        this.step_active = 0\r\n        this.nextBtn = '下一步'\r\n      }\r\n      if (this.step_active === 1) {\r\n        this.studentsTags = []\r\n        this.studentTagsIds = [0, 1]\r\n        // 获取教室已有的学生\r\n        this.getClassStudents()\r\n      }\r\n    },\r\n    async onCollegeSelect () {\r\n      this.collegeInfoForm.class_id = null\r\n      const { data: res } = await this.$http.get('/collegeClass/getCollegeClass', { params: { college_id: this.selectCollege_id } })\r\n      console.log(res)\r\n      this.classList = res.data\r\n    },\r\n    async getClassStudents () {\r\n      const { data: res } = await this.$http.get('/student/getClassStudentList', { params: { class_id: this.collegeInfoForm.class_id } })\r\n      for (let j = 0; j < res.data.length; j++) {\r\n        this.studentsTags.push({\r\n          account_id: res.data[j].account_id,\r\n          name: res.data[j].turename\r\n        })\r\n        this.studentTagsIds.push(res.data[j].account_id)\r\n      }\r\n    },\r\n    dialogClose () {\r\n      this.DialogSelectCollege_id = null\r\n      this.studentInfoForm.selected_student = null\r\n    },\r\n    // async getCollegeClassList () {\r\n    //   const { data: res } = await this.$http.get('/collegeClass/getCollegeClass', { params: { college_id: this.DialogSelectCollege_id } })\r\n    //   this.dialogClassList = res.data\r\n    // },\r\n    async onCollegeSelectChange () {\r\n      this.studentInfoForm.selected_student = null\r\n      const { data: res } = await this.$http.post('/student/getCollegeStudentListNotIn', {\r\n        college_id: this.DialogSelectCollege_id,\r\n        ids: this.studentTagsIds\r\n      })\r\n      console.log(res)\r\n      if (res.code !== 200) this.$message.error(res.msg)\r\n      this.dialogStudentsList = res.data\r\n    },\r\n    async addStuConfirm () {\r\n      if (this.dropStudents.indexOf(this.studentInfoForm.selected_student) === -1) {\r\n        this.addStudentIds.push(this.studentInfoForm.selected_student)\r\n      } else {\r\n        this.dropStudents.splice(this.dropStudents.indexOf(this.studentInfoForm.selected_student), 1)\r\n      }\r\n      const { data: res } = await this.$http.get('/student/getStudentByAccountId', { params: { account_id: this.studentInfoForm.selected_student } })\r\n      this.studentsTags.push({\r\n        account_id: this.studentInfoForm.selected_student,\r\n        name: res.data.turename\r\n      })\r\n      this.studentTagsIds.push(this.studentInfoForm.selected_student)\r\n      this.addStuDialogVisible = false\r\n      console.log('新增的学生')\r\n      console.log(this.addStudentIds)\r\n      console.log('删除的学生')\r\n      console.log(this.dropStudents)\r\n      console.log('已经选中的学生')\r\n      console.log(this.studentTagsIds)\r\n    },\r\n    handleClose (tag) {\r\n      if (this.addStudentIds.indexOf(tag.account_id) === -1) {\r\n        this.dropStudents.push(tag.account_id)\r\n      } else {\r\n        this.addStudentIds.splice(this.addStudentIds.indexOf(tag.account_id), 1)\r\n      }\r\n      this.studentsTags.splice(this.studentsTags.indexOf(tag), 1)\r\n      this.studentTagsIds.splice(this.studentTagsIds.indexOf(tag.account_id), 1)\r\n      console.log('新增的学生')\r\n      console.log(this.addStudentIds)\r\n      console.log('删除的学生')\r\n      console.log(this.dropStudents)\r\n      console.log('已经选中的学生')\r\n      console.log(this.studentTagsIds)\r\n    },\r\n    async submit () {\r\n      const { data: res } = await this.$http.post('/student/changeClass', {\r\n        class_id: this.collegeInfoForm.class_id,\r\n        dropIds: this.dropStudents,\r\n        addIds: this.addStudentIds\r\n      })\r\n      if (res.code !== 200) return this.$message.error(res.msg)\r\n      this.$message.success(res.msg)\r\n      this.step_active = 0\r\n      this.collegeInfoForm.class_id = null\r\n      this.studentTagsIds = [0, 1]\r\n      this.addStudentIds = []\r\n      this.dropStudents = []\r\n      this.dialogStudentsList = []\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.stepForm {\r\n  text-align: center;\r\n  margin-top: 64px;\r\n}\r\n\r\n.tags {\r\n  margin-top: 12px;\r\n  text-align: center;\r\n  margin-bottom: 12px;\r\n}\r\n\r\n.el-tag + .el-tag {\r\n  margin-left: 10px;\r\n}\r\n\r\n.button-new-tag {\r\n  margin-left: 10px;\r\n  height: 32px;\r\n  line-height: 30px;\r\n  padding-top: 0;\r\n  padding-bottom: 0;\r\n}\r\n\r\n.input-new-tag {\r\n  width: 90px;\r\n  margin-left: 10px;\r\n  vertical-align: bottom;\r\n}\r\n\r\n.stepForm3 {\r\n  text-align: center;\r\n}\r\n</style>\r\n"]}]}